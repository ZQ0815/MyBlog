# 面向对象编程基础

类是对象的抽象，对象是类的实例。

类的成员：属性、方法、构造器、代码块、内部类。

面向对象三大特征：封装性、继承性、多态性。（抽象）

面向过程强调的是功能行为；面向对象强调的是具备了功能的类。

匿名对象：new Object()，一般用于方法的实参。

## 继承
每个子类都拥有父类的方法和属性，提高代码复用性，继承了父类的同时又可以在父类的基础上为所欲为。但是降低代码的灵活性，必须具有某些方法和属性。也增强了耦合性。

## 封装
封装可以使我们容易地修改类的内部实现，而无需修改使用了该类的客户代码。就可以对成员变量进行更精确的控制。

### 为什么封装属性后又提供get和set方法
1. 很多库需要getters and setters。比如，reflection, serialization， mock object的时候需要这个。
2. spring用到反射机制需要setters注入属性，jackson序列化反序列化都要用到，没有getters, setters真不行当你意识到需要做的不仅仅是设置和获取该值，不必更改代码库中的每个文件。
3. 比如，当几个月后你意识到某个set方法需要做的不仅是this.value = value的时候，你发现这个属性已被直接用于一百多个其他类 ：)
4. 继承该类的子类可以覆盖父类的方法，实现不同于父类的getters, setters。可以在方法里执行验证。
5. 可以在方法里修正/处理set的值。比如，保留小数点位数，数据格式，日期格式等等可以隐藏内部表示。 
6. 比如，内部的地址是用country, state, city, street, zipcode表示，getAddress()可以集成几个字段。
7. 可以为setter 和 getters设置不同的访问级别
8. lazy loading


## 多态
定义变量所指的具体类型和引用变量的方法调用在编程时并不确定，而是在程序运行期间才确定。
>主要关联方法引用的解析-静态分配-动态分配

## 包（package与import）

包的作用：为了对Java类进行统一的管理。

包命名规范：包名统一使用**小写**，点分隔符之间有且仅有一个自然语义的英文单词或者多个单词自然连接到一块（如 springframework，deepspace不需要使用任何分割）。包名统一使用**单数形式**，如果类名有复数含义，则可以使用复数形式。包名的构成可以分为以下几四部分【前缀】【发起者名】【项目名】【模块名】。常见的前缀可以分为以下几种：

每个“.”代表一层目录。

不同的包下面可以有相同的类名，同一个包下不能有相同的类名。（虽然Java严格区分大小写，同一个包下可以有DbContent和dbcontent；但是文件系统不区分大小写，导致文件名重复：Type with same name but different case exists.【具有相同名称但大小写不同的类型。】）

package位于源文件的首行，即package语句是代码的第一行非空行。

import：

1. 位于package语句后面，类的定义前面。

2. 用于显示地导入指定包下的类或者接口。

3. 如果需要导入多个类或者接口，则需要并列地写多条import语句。

4. 也可以使用“import java.util.*;”这种方式导入该包下的所有类或接口。
   1. 但是不会导入子包，例如：import java.util.*; 可以导入Scanner类，而import java.*;不能。
   2. 这种方法并不会导入所有的类，只会导入用到的类，编译时会替换成单类型导入。

5. 已经导入了一个包，如果还需要它的子包，那么子包还需另外导入。

6. java.lang包下的类和接口是默认自动导入的,当前包的成员本身就在作用域内所以当前包和java.lang包的导入是可以省略的。

7. 如果有使用到不同包下的同名类，只能使用类的全名来指明。

8. import static 调用指定包下指定类或接口中的静态属性和方法。

``` java
import static java.lang.System.out;
out.println("hello");
```

参考：https://blog.csdn.net/qq_25665807/article/details/74747868

## 访问权限修饰符

对于class的访问权限只能用public和default（缺省）来修饰：

​    public：任何地方可以访问该类；

​    default：只有在同一个包下访问该类。

代码块只能用static修饰。

| **修饰符** | **类内部** | **同一个包** | **不同包的子类** | **任何地方** |
| :--------: | :--------: | :----------: | :--------------: | :----------: |
|  private   |     √      |              |                  |              |
|  （缺省）  |     √      |      √       |                  |              |
| protected  |     √      |      √       |        √         |              |
|   public   |     √      |      √       |        √         |      √       |

## this

this表示当前对象。可以用来使用类的属性、方法和构造器。

this.属性名：用来指定当前对象的属性，this在不引起歧义时可以省略。

this.方法名()：用来调用当前对象的非静态方法，this在不引起歧义时可以省略。

this()用于调用类的其他构造器。可以多级调用，但禁止套娃。this()必须放在构造器的首行，一个构造器中只能出现一个this()。 à 推论：n个构造器中一共最多可出现n-1条this()语句。

this不能出现在静态上下文中。

## super

super表示当前对象的父类。可以用来使用父类的属性、方法和构造器。

当父类中的方法被子类重写后，在子类中可以使用【super.方法名】来调用父类的被重写方法，使用【this.方法名】来调用子类的重写方法。如果子类没有重写，那么【super.方法名】和【this.方法名】都是调用父类的方法，或者直接使用【方法名】（省略了this.）。属性同理。

如果有一个方法继承时一路重写下来，那么【super.方法名】调用的是直接父类的方法。

super()用来调用父类的构造器。在子类的构造器中，如果没有显示地使用super()调用父类构造器，或者使用this()来调用其他构造器，那么Java默认自动的调用父类的无参构造器。如果父类没有无参构造器，就会报错【Implicit super constructor Person() is undefined. Must explicitly invoke another constructor】。（这也就解释了为什么Java会白送一个无参构造器）

super()必须放在子类构造器的首行，一个构造器中只能出现一个super()。

创建子类对象必定会调用父类构造器。


## static

static可以用来修饰：属性、方法、代码块、内部类。

### static修饰变量：类变量

1、同一个类的所有对象共同拥有(共享)一份类变量；每个对象各自拥有一份实例变量。

2、类变量随着类的加载而创建；实例变量随着对象的创建而创建。

3、在程序的一次运行过程中，每个类只会被加载一次。

4、使用类变量：类名.类变量名 / 对象名.类变量名。

### static修饰方法：静态方法

1、静态方法随着类的加载而加载。

2、调用静态方法：类名.静态方法名(参数列表) / 对象名.静态方法名(参数列表)。

3、静态方法中不能使用非静态的实例变量，可以使用静态的类变量。静态方法中不能调用非静态的方法，可以调用静态方法。

4、非静态方法中可以使用类变量和静态方法。

5、静态方法中不能使用“this”和“super”。



【思考】什么时候使用static修饰属性和方法？

static修饰属性：

​	1、当一个属性作为常量时，必须使用static修饰。

​	2、当多个对象共同使用一份属性时。

static修饰方法：

​	1、工具类中的方法一般使用static修饰。

​	2、有时为了使用类变量，方法也会使用static修饰。

### 类加载的过程

1、当我们创建对象时，首先会在方法区中查找该类的信息。

2、如果在方法区中没有找到该类的信息，则进行类加载。如果有，直接创建对象。

3、类加载：将字节码文件加载到JVM中，同时在方法区的特定区域中存放static变量。（细节：不是只有创建对象时才进行类加载，而是当我们调用类时就进行类加载）


## 6.6 final

final修饰的类：不能被继承。如，String、StringBuffer。

final修饰的方法：不能被重写。

final修饰的属性：必须要且仅能被赋值一次(即初始化)，且只有显示赋值、代码块赋值、构造器赋值这三种方式。

final修饰的方法体/代码块的局部变量：必须要且仅能被赋值一次，可以声明的同时赋值，也可以先声明后赋值。

final修饰的方法的形参，保证参数不被改变（如果参数是引用类型，只保证引用不改变所指对象，而对象的属性的值可以改变）。

常量：可以通过类名调用，static；常量的值不可改变，final；名称全大写。

```java
public static final double PI = 3.14159265358979323846;
```

## JavaBean

JavaBean是一种Java语言写成的可重用组件。

所谓JavaBean，是指符合以下标准的Java类：

- 类是具体的，且是public的；
- 有一个无参数的public的构造器；
- 有属性，且每一个属性具有对应的get、set方法。